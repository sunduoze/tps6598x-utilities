<!DOCTYPE html>
<html>
    <title>TPS6598x Host Interface Tools</title>
    <head>
        <link rel="stylesheet" type="text/css" href="css/jquery-ui.css">
        <link rel="stylesheet" type="text/css" href="css/slider_style.css">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link rel="stylesheet" type="text/css" href="css/pips.css">
        <link rel="stylesheet" type="text/css" href="css/iosCheckbox.css">
        <link rel="stylesheet" type="text/css" href="css/toastr.css">
        <link rel="stylesheet" type="text/css" href="css/segment.css">

        <script src="html/register.js" type="text/javascript"></script>
        <script src="html/config.js" type="text/javascript"></script>
        <script src="html/function.js" type="text/javascript"></script>
        <script src="html/about_html.js" type="text/javascript"></script>

    
        <style>
            html *
            {   
               font-family: Arial !important;
            }
            h1 {
                font-size: 36px;
            }

            h2 {
                color: #000;
                font-size: 34px;
            }

            p {
                font-size: 24px;
            }

            form {
                display: inline;
            }

            tr {
                font-size: 24px;
                height: 30px;
            }

            td {
                font-size: 24px;
            }

            table{
                width: 100%;
            }

            tr:nth-child(even) {background: #EEE}
            tr:nth-child(odd) {background: #DDD}

            input[type="text"] {
                background-color: transparent;
                border: solid;
                border-width: 1px;
                font-size: 24px;
                width: auto;
                text-align: right;
            }

            select{
                background-color: transparent;
                border: solid;
                border-width: 1px;
                height: 24px;
                width: auto;
                font-size: 20px;
                padding: 0px;
                direction: rtl;
            }

            input[type="checkbox"] {
                width: 28px;
                height: 28px;
                outline: 1px solid #000;
                border-width: 1px;
            }

            button {
                font-size: 24px;
                padding: 5px;
            }


            .container { 
                position:relative; 
                padding:0 50px 0 0px; 
                margin: 20px 0 0 0;
                height: 100%;
            }
            
            
            #sidebar {
                position: static;
                display: inline-block;
                top: 10px;
                bottom: 0;
                left: 0;
                width: 200px;
                height: 100%;
            }

            #content { 
                position: static;
                display: inline-block;
                top: 10px;
                bottom: 0px;
                left: 10px;
                border: none; 
                width:100%; 
                height: 100%;

            }
            
            .sidebar_list {
                color: #cc0000;
                border: none;
                background-color: white;
                border-radius: 10px;
                padding-left: 15px;
                padding-right: 15px;
                padding-top: 15px;
                padding-bottom: 15px;
                text-align: left;
                font-size: 30px;
                font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
                cursor: pointer;
            }

            .aboutbutton {
                color: #000000;
                border: none;
                background-color: white;
                border-radius: 10px;
                padding-left: 15px;
                padding-right: 15px;
                padding-top: 15px;
                padding-bottom: 15px;
                text-align: right;
                font-size: 30px;
                font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
                cursor: pointer;
                vertical-align: bottom;
            }

            table.fixed { table-layout:fixed; }
            table.fixed td { overflow: visible; }

            .ti_logo_frame {
                min-width: 1000px;
                width: 100%;
                height: 20px;
                line-height: 20px;
                background-color: #cc0000;
                position: absolute;
                left: 0;
                right: 0;
            }

            .ti_logo {
                position: absolute;
                right: 10px;
                top: 2px;
                padding-right: 20px;
                width: auto;
                height: 32px;
                max-height: 32px;
            }

        </style>

        <script type="text/javascript" src="/html/jquery-1.10.2.js"></script>
        <script type="text/javascript" src="/html/jquery-ui.js"></script>
 
        <script type="text/javascript">
            window.currentXhr = null;

            function reload_js(src) {
                $('script[src="' + src + '"]').remove();
                $('<script>').attr('src', src).appendTo('head');
            }

            $(document).ready(function () {
                // Serialize loads using page load callback
                // Just in case two sections try to access I2C/SPI 
                //     they need to run serially
                reload_js('html/register.js');
                reload_js('html/config.js');
                reload_js('html/function.js');
                reload_js('html/about_html.js');
                
                var postdata = {};

                $('#content').load('/welcome', postdata, function () {
                    $('#sidebar').load('/sidebar', postdata, function () {
                        $('#connected_status').load('/report_connect');
                        // bind test and I2C scanner buttons
                        $('#testButton').click(jsTestConnect);
                        $('#scanI2CButton').click(jsScanIic);
                    });
                });
            });

            function dismiss_warning() {
                var postdata = {};
                
                $.post('/dismiss_warning', postdata, function () {
                    $('#content').load('/welcome', postdata, function () {
                        $('#connected_status').load('/report_connect');
                    });
                });
            }

            function eliminate_warning() {
                var postdata = {};

                $.post('/eliminate_warning', postdata, function () {
                    $('#content').load('/welcome', postdata, function () {
                        $('#connected_status').load('/report_connect');
                    });
                });
            }


            function jsTestConnect() {
                var postdata = {};
                $('#connected_status').html("Testing...")
                $('#testButton').unbind();
                $('#scanI2CButton').unbind();
                $('#sidebar').load('/sidebar_silent', {}, function () {
                    $('#connected_status').load('/test_connect',postdata, function(){
                        $('#testButton').unbind().click(jsTestConnect);
                        $('#scanI2CButton').unbind().click(jsScanIic);
                        $('#sidebar').load('/sidebar', {}, function () {});
                    });
                });
            }

            function jsScanIic() {
                var postdata = {};
                // unbind test and I2C scanner buttons
                $('#testButton').unbind();
                $('#scanI2CButton').unbind();
                $('#sidebar').load('/sidebar_silent', {}, function () {
                    $('#content').load('/iic_scanner_warning', postdata, function () {
                        $('#content').load('/iic_scanner', postdata, function () {
                            $('#testButton').unbind().click(jsTestConnect);
                            $('#scanI2CButton').unbind().click(jsScanIic);
                            $('#sidebar').load('/sidebar', postdata, function () {
                                $('#connected_status').load('/report_connect');
                            });
                        });
                    });
                });
            }

            function load_welcome() {
                var postdata = {};

                $('#content').load('/welcome', postdata, function () {
                    $('#connected_status').load('/report_connect');
                });
            }

            function jsFlashAbortHandler(errorString) {
                var postdata = {};

                if (window.currentXhr != null) {
                    window.currentXhr.abort();
                    window.currentXhr = null;
                    $('#content').html("<h1>Flash Update Aborted</h1>")
                }

                $('#testButton').unbind().click(jsTestConnect);
                $('#scanI2CButton').unbind().click(jsScanIic);
                $('#sidebar').load('/sidebar', postdata, function () {
                    $('#connected_status').load('/report_connect');
                });

                $.post('/upload_file_abort', {}, function (data) {
                    if (data['failure'] != 0) {
                        alert('Field change failed with return: ' + data['failure_message']);
                    }
                });

                $('#content').load('/upload_file_abort_page', { }, function () { });
            }

            function jsSpiFlashAbortHandler( errorString) {
                var postdata = {};

                if (window.currentXhr != null) {
                    window.currentXhr.abort();
                    window.currentXhr = null;
                    $('#content').html("<h1>Flash Update Aborted</h1>")
                }

                $('#testButton').unbind().click(jsTestConnect);
                $('#scanI2CButton').unbind().click(jsScanIic);
                $('#sidebar').load('/sidebar', postdata, function () {
                    $('#connected_status').load('/report_connect');
                });
                $.post('/spi_upload_file_abort', {}, function (data) {
                    if (data['failure'] != 0) {
                        alert('Field change failed with return: ' + data['failure_message']);
                    }
                });

                $('#content').load('/spi_upload_file_abort_page', {}, function () { });

            }


            function jsFlashingClickError() {
                alert('A flashing operating is currently in process.  Press the "Abort Flash Update" button to abort before moving pages.')
            }

            function jsFlashSubmitButton() {
                var postdata = {};
                var message = "";

                $('#sidebar').load('/sidebar_disabled')
                // unbind test and I2C scanner buttons
                $('#testButton').unbind().click(jsFlashingClickError);
                $('#scanI2CButton').unbind().click(jsFlashingClickError);

                function write_callback(data) {
                    $('#i2cflash_write_progbar_insert').progressbar("option", "value", data['progress']);

                    if (data['progress'] == -1) {
                        // abort
                        if (window.currentXhr != null) {
                            window.currentXhr.abort();
                            window.currentXhr = null;
                            $('#content').html("<h1>Flash Update Aborted</h1>")
                        }

                        $('#testButton').unbind().click(jsTestConnect);
                        $('#scanI2CButton').unbind().click(jsScanIic);
                        $('#sidebar').load('/sidebar', {}, function () {
                            $('#connected_status').load('/report_connect');
                        });

                        $('#content').load('/upload_file_abort_page', {}, function () { });

                        return;
                    } else if (data['progress'] < data['write_size']) {
                        // Careful, this is called recursively, although if statement should protect
                        window.currentXhr = $.post('/upload_file_progbar_write', postdata, write_callback);
                    }
                    else {
                        window.currentXhr = null;
                        $('#i2cflash_verification_message').load('/upload_file_progbar_verify', postdata, function () {
                            // rebind test and I2C scanner buttons
                            $('#testButton').unbind().click(jsTestConnect);
                            $('#scanI2CButton').unbind().click(jsScanIic);
                            $('#sidebar').load('/sidebar', postdata, function () {
                                $('#connected_status').load('/report_connect');
                            });
                        });
                    }
                }

                function erase_callback(data) {
                    $('#i2cflash_erase_progbar_insert').progressbar("option", "value", data['progress']);

                    if (data['progress'] == -1) {
                        // abort
                        if (window.currentXhr != null) {
                            window.currentXhr.abort();
                            window.currentXhr = null;
                            $('#content').html("<h1>Flash Update Aborted</h1>")
                        }

                        $('#testButton').unbind().click(jsTestConnect);
                        $('#scanI2CButton').unbind().click(jsScanIic);
                        $('#sidebar').load('/sidebar', {}, function () {
                            $('#connected_status').load('/report_connect');
                        });

                        $('#content').load('/upload_file_abort_page', {}, function () { });

                        return;
                    } else if (data['progress'] < data['erase_size']) {
                        // Careful, this is called recursively, although if statement should protect
                        window.currentXhr = $.post('/upload_file_progbar_erase', postdata, erase_callback);
                    }
                    else {
                        $('#i2cflash_write_message').html("Flashing region")
                        // post first to initialize progress bar
                        window.currentXhr = $.post('/upload_file_progbar_write', postdata, function (data) {
                            $('#i2cflash_write_progbar_insert').progressbar({ max: data['write_size'] });

                            if (data['write_size'] != -1) {
                                // next post cyclically until progressbar completes
                                window.currentXhr = $.post('/upload_file_progbar_write', postdata, write_callback);
                            }
                            else {
                                // abort
                                if (window.currentXhr != null) {
                                    window.currentXhr.abort();
                                    window.currentXhr = null;
                                    $('#content').html("<h1>Flash Update Aborted</h1>")
                                }

                                $('#testButton').unbind().click(jsTestConnect);
                                $('#scanI2CButton').unbind().click(jsScanIic);
                                $('#sidebar').load('/sidebar', postdata, function () {
                                    $('#connected_status').load('/report_connect');
                                });

                                $('#content').load('/upload_file_abort_page', {}, function () { });

                                return;
                            }

                        });
                    }
                }

                $('#content').load('/upload_file_progbar_init', postdata, function (data) {
                    // activate abort button
                    $('#abortButton').click( jsFlashAbortHandler);

                    // post first to initialize progress bar
                    window.currentXhr = $.post('/upload_file_progbar_erase', postdata, function (data) {
                        $('#i2cflash_erase_progbar_insert').progressbar({ max: data['erase_size'] });

                        if (data['erase_size'] != -1) {
                            // next post cyclically until progressbar completes
                            window.currentXhr = $.post('/upload_file_progbar_erase', postdata, erase_callback);
                        }
                        else {
                            // abort
                            if (window.currentXhr != null) {
                                window.currentXhr.abort();
                                window.currentXhr = null;
                                $('#content').html("<h1>Flash Update Aborted</h1>")
                            }

                            $('#testButton').unbind().click(jsTestConnect);
                            $('#scanI2CButton').unbind().click(jsScanIic);
                            $('#sidebar').load('/sidebar', {}, function () {
                                $('#connected_status').load('/report_connect');
                            });

                            $('#content').load('/upload_file_abort_page', {}, function () { });

                            return;
                        }
                    });
                });

            }

            function jsSpiFlashSubmitButton() {
                var postdata = {};
                var message = "";

                $('#sidebar').load('/sidebar_disabled')
                // unbind test and I2C scanner buttons
                $('#testButton').unbind().click(jsFlashingClickError);
                $('#scanI2CButton').unbind().click(jsFlashingClickError);

                function spi_verify_callback(data) {
                    $('#spiflash_verify_progbar_insert').progressbar("option", "value", data['progress']);

                    if (data['progress'] == -1) {
                        if (window.currentXhr != null) {
                            window.currentXhr.abort();
                            window.currentXhr = null;
                            $('#content').html("<h1>Flash Update Aborted</h1>")
                        }

                        $('#testButton').unbind().click(jsTestConnect);
                        $('#scanI2CButton').unbind().click(jsScanIic);
                        $('#sidebar').load('/sidebar', {}, function () {
                            $('#connected_status').load('/report_connect');
                        });

                        $('#content').load('/spi_upload_file_abort_page', {}, function () { });

                        return;
                    } else if (data['progress'] < data['verify_size']) {
                        // Careful, this is called recursively, although if statement should protect
                        window.currentXhr = $.post('/spi_upload_file_verify', postdata, spi_verify_callback);
                    }
                    else {
                        window.currentXhr = null;
                        $('#spiflash_verification_result').load('/spi_upload_file_result', postdata, function () {
                            // rebind test and I2C scanner buttons
                            $('#testButton').unbind().click(jsTestConnect);
                            $('#scanI2CButton').unbind().click(jsScanIic);
                            $('#sidebar').load('/sidebar', postdata, function () {
                                $('#connected_status').load('/report_connect');
                            });
                        });
                    }
                }

                function spi_write_callback(data) {
                    $('#spiflash_write_progbar_insert').progressbar("option", "value", data['progress']);

                    if (data['progress'] == -1) {
                        if (window.currentXhr != null) {
                            window.currentXhr.abort();
                            window.currentXhr = null;
                            $('#content').html("<h1>Flash Update Aborted</h1>")
                        }

                        $('#testButton').unbind().click(jsTestConnect);
                        $('#scanI2CButton').unbind().click(jsScanIic);
                        $('#sidebar').load('/sidebar', {}, function () {
                            $('#connected_status').load('/report_connect');
                        });

                        $('#content').load('/spi_upload_file_abort_page', {}, function () { });

                        return;
                    } else if (data['progress'] < data['write_size']) {
                        // Careful, this is called recursively, although if statement should protect
                        window.currentXhr = $.post('/spi_upload_file_write', postdata, spi_write_callback);
                    }
                    else {
                        $('#spiflash_verification_message').html("Verifying Image")
                        // post first to initialize progress bar
                        window.currentXhr = $.post('/spi_upload_file_verify', postdata, function (data) {
                            $('#spiflash_verify_progbar_insert').progressbar({ max: data['verify_size'] });

                            if (data['verify_size'] != -1) {
                                // next post cyclically until progressbar completes
                                window.currentXhr = $.post('/spi_upload_file_verify', postdata, spi_verify_callback);
                            }
                            else {
                                if (window.currentXhr != null) {
                                    window.currentXhr.abort();
                                    window.currentXhr = null;
                                    $('#content').html("<h1>Flash Update Aborted</h1>")
                                }

                                $('#testButton').unbind().click(jsTestConnect);
                                $('#scanI2CButton').unbind().click(jsScanIic);
                                $('#sidebar').load('/sidebar', {}, function () {
                                    $('#connected_status').load('/report_connect');
                                });

                                $('#content').load('/spi_upload_file_abort_page', {}, function () { });

                                return;
                            }
                        });
                    }
                }

                function spi_erase_callback(data) {
                    $('#spiflash_erase_progbar_insert').progressbar("option", "value", data['progress']);

                    if (data['progress'] == -1) {
                        if (window.currentXhr != null) {
                            window.currentXhr.abort();
                            window.currentXhr = null;
                            $('#content').html("<h1>Flash Update Aborted</h1>")
                        }

                        $('#testButton').unbind().click(jsTestConnect);
                        $('#scanI2CButton').unbind().click(jsScanIic);
                        $('#sidebar').load('/sidebar', {}, function () {
                            $('#connected_status').load('/report_connect');
                        });

                        $('#content').load('/spi_upload_file_abort_page', {}, function () { });

                        return;
                    } else if (data['progress'] < data['erase_size']) {
                        // Careful, this is called recursively, although if statement should protect
                        window.currentXhr = $.post('/spi_upload_file_erase', postdata, spi_erase_callback);
                    }
                    else {
                        $('#spiflash_write_message').html("Flashing Image")
                        // post first to initialize progress bar
                        window.currentXhr = $.post('/spi_upload_file_write', postdata, function (data) {
                            $('#spiflash_write_progbar_insert').progressbar({ max: data['write_size'] });

                            if (data['write_size'] != -1) {
                                // next post cyclically until progressbar completes
                                window.currentXhr = $.post('/spi_upload_file_write', postdata, spi_write_callback);
                            }
                            else {
                                if (window.currentXhr != null) {
                                    window.currentXhr.abort();
                                    window.currentXhr = null;
                                    $('#content').html("<h1>Flash Update Aborted</h1>")
                                }

                                $('#testButton').unbind().click(jsTestConnect);
                                $('#scanI2CButton').unbind().click(jsScanIic);
                                $('#sidebar').load('/sidebar', {}, function () {
                                    $('#connected_status').load('/report_connect');
                                });

                                $('#content').load('/spi_upload_file_abort_page', {}, function () { });

                                return;
                            }
                        });
                    }
                }

                $('#content').load('/spi_upload_file_init', postdata, function (data) {
                    // activate abort button
                    $('#spiAbortButton').click(function () { jsSpiFlashAbortHandler( ); });

                    // post first to initialize progress bar
                    window.currentXhr = $.post('/spi_upload_file_erase', postdata, function (data) {
                        $('#spiflash_erase_progbar_insert').progressbar({ max: data['erase_size'] });

                        if (data['erase_size'] != -1) {
                            // next post cyclically until progressbar completes
                            window.currentXhr = $.post('/spi_upload_file_erase', postdata, spi_erase_callback);
                        }
                        else {
                            if (window.currentXhr != null) {
                                window.currentXhr.abort();
                                window.currentXhr = null;
                                $('#content').html("<h1>Flash Update Aborted</h1>")
                            }

                            $('#testButton').unbind().click(jsTestConnect);
                            $('#scanI2CButton').unbind().click(jsScanIic);
                            $('#sidebar').load('/sidebar', {}, function () {
                                $('#connected_status').load('/report_connect');
                            });

                            $('#content').load('/spi_upload_file_abort_page', {}, function () { });

                            return;
                        }
                    });
                });

            }


            function jsAboutHostTools() {
                var loAboutScreenElement = document.getElementById('div');

                if (loAboutScreenElement == null) {
                    loAboutScreenElement = document.createElement('div');
                    loAboutScreenElement.id = 'dialog-about';
                    loAboutScreenElement.className = 'dialog_about';

                    // header
                    var loHeaderElement = document.createElement('div');
                    loHeaderElement.className = 'dialog_header';
                    loHeaderElement.innerHTML = "About";
                    loHeaderElement.style.color = '#cc0000';
                    loAboutScreenElement.appendChild(loHeaderElement);

                    //        loAboutScreenElement.innerHTML = obAboutHtml;

                    var loBodyElement = document.createElement('div');
                    loBodyElement.className = 'dialog-about_message';
                    loBodyElement.innerHTML = obAboutHtml;
                    loHeaderElement.insertAdjacentHTML(
                        'beforeend', "<hr size='1px' color='#aaaaaa' noshade style='  margin-left: 10px;margin-right: 10px'>");
                    loAboutScreenElement.appendChild(loBodyElement);

                    //        var loButtonsDiv = document.createElement('div');
                    //        loButtonsDiv.className = 'questions_ok_cancel_buttons_parent';
                    //        loButtonsDiv.style.textAlign = 'center';

                    var loCancelButtonElement = document.createElement('button');
                    loCancelButtonElement.id = 'close_about';
                    loCancelButtonElement.innerHTML = 'Close';
                    loCancelButtonElement.className = 'setup_button_about';

                    loCancelButtonElement.onclick = function () {
                        $(loAboutScreenElement).dialog('close');
                    };

                    loBodyElement.appendChild(loCancelButtonElement);

                    //        loAboutScreenElement.appendChild(loButtonsDiv);

                    document.body.appendChild(loAboutScreenElement);
                }

                $(loAboutScreenElement)
                    .dialog({
                        modal: true,
                        width: 746,
                        resizable: false,
                        //            height: 510,
                        left: 0,
                        top: 0
                    });
            }


            function jsUpdateFlashFile() {
                var selectedFile = $('#flashFile')[0].files[0];
                var reader = new FileReader();

                reader.onloadend = function () {
                    dataURL = reader.result;
                    var postdata = { dataURL: dataURL };

                    $.post('/handle_update_flashfile', postdata, function (data) {
                        if (data['failure'] != 0) {
                            alert('Field change failed with return: ' + data['failure_message']);
                        }
                        $('#flash_button_insert').html('<button style="font-size: 20px; height 30px" onclick="javascript:jsFlashSubmitButton()"> Program The Region </button>');
                    });
                }

                reader.readAsBinaryString(selectedFile);

            }

            function jsUpdateSpiFlashFile() {
                var selectedFile = $('#spiFlashFile')[0].files[0];
                var reader = new FileReader();

                reader.onloadend = function () {
                    dataURL = reader.result;
                    var postdata = { dataURL: dataURL };

                    $.post('/handle_update_spiflashfile', postdata, function (data) {
                        if (data['failure'] != 0) {
                            alert('Field change failed with return: ' + data['failure_message']);
                        }
                        $('#spi_flash_button_insert').html('<button style="font-size: 20px; height 30px" onclick="javascript:jsSpiFlashSubmitButton()"> Program Flash Image </button>');
                    });
                }

                reader.readAsBinaryString(selectedFile);

            }


            function jsUpdateIicHandler(selection, variable_name) {
                if (variable_name == "region_file") {
                    var postdata = { variable: variable_name, value: selection };
                } else {
                    var postdata = { variable: variable_name, value: selection.value };
                }

                // TODO: server returns the new values of all fields in the register
                //     including hide attribute. Need to use to update the display
                //     with the callback (function below)
                $.post('/handle_update_iic', postdata, function (data) {
                    if (data['failure'] != 0) {
                        alert('Field change failed with return: ' + data['failure_message']);
                    }
                });

                return false;
            }


            function load_register_list() {
                var postdata = {};

                $('#content').load('/register_list', postdata, function () {
                });
            }

            function load_register(register_name, read, parent_type, parent_name) {
                var postdata = { register: register_name, read: read, parent_type: parent_type, parent_name: parent_name };

                // unbind test and I2C scanner buttons
                $('#testButton').unbind();
                $('#scanI2CButton').unbind();

                $('#sidebar').load('/sidebar_silent', {}, function () {
                    $('#content').load('/access_register_preview', postdata, function () {
                        $('#content').load('/access_register', postdata, function () {
                            $('#testButton').unbind().click(jsTestConnect);
                            $('#scanI2CButton').unbind().click(jsScanIic);
                            $('#sidebar').load('/sidebar', {}, function () {
                                $('#connected_status').load('/report_connect');
                            });
                        });
                    });
                });
            }

            function load_update_iic() {
                var postdata = { };
                // unbind test and I2C scanner buttons
                $('#testButton').unbind();
                $('#scanI2CButton').unbind();

                $('#sidebar').load('/sidebar_silent', {}, function () {
                    $('#content').load('/update_iic_preview', postdata, function () {
                        $('#content').load('/update_iic', postdata, function () {
                            $('#testButton').unbind().click(jsTestConnect);
                            $('#scanI2CButton').unbind().click(jsScanIic);
                            $('#sidebar').load('/sidebar', {}, function () {
                                $('#connected_status').load('/report_connect');
                            });
                        });
                    });
                });


            }

            function load_update_spi() {
                var postdata = {};

                $('#content').load('/update_spi', postdata, function () {
                    $('#connected_status').load('/report_connect');
                }
                );

            }

            function jsConfigTestHandler() {
                var postdata = {};

                $('#idConfigTest').load('/config_test', postdata, function () {
                    $('#connected_status').load('/report_connect');
                }
                );
            }

            function load_config() {
                var postdata = {};

                $('#content').load('/config', postdata, function () {
                    $('#connected_status').load('/report_connect');
                }
                );
            }

            function load_hifunction_list() {
                var postdata = {};

                $('#content').load('/hifunction_list', postdata, function () {
                }
                );
            }

            function load_hifunction(function_name, bRead, parent_type, parent_name) {
                var postdata = {function_name: function_name, read:bRead, parent_type: parent_type, parent_name: parent_name};

                // unbind test and I2C scanner buttons
                $('#testButton').unbind();
                $('#scanI2CButton').unbind();

                $('#sidebar').load('/sidebar_silent', {}, function () {
                    $('#content').load('/access_function_preview', postdata, function () {
                        $('#content').load('/access_function', postdata, function () {
                            $('#testButton').unbind().click(jsTestConnect);
                            $('#scanI2CButton').unbind().click(jsScanIic);
                            $('#sidebar').load('/sidebar', {}, function () {
                                $('#connected_status').load('/report_connect');
                            });
                        });
                    });
                })
            }
            
        </script>
    
       </head>

    <body style="min-width: 990px">
        <div id="main">

            <div class="container" style="height: 100%; left: 0; right: 0">
                <table class="fixed" style="width:100%; height: 100%">
                    <col width="201px;" />
                    <col width="100%;" />
                    <tr style="background: #FFF">
                        <td style="background: #fff; height: 10px; border-width: 2px; border-color: #aaaaaa; border-right-style: none; border-bottom-style: none; border-top-style: none; border-left-style: none;"></td>
                        <td style="height: 10px;"></td>
                    </tr>
                    <tr style="background: #FFF">
                        <td style="position: fixed; background: #FFF; left: 0px; top:72px; bottom: 36px; border-width: 2px; border-color: #aaaaaa; border-right-style: solid; border-bottom-style: none; border-top-style: none; border-left-style: none;"><div id="sidebar"></div></td>
                        <td><div id="content" style="height: 100%; padding-left: 15px; padding-top: 26px"></div></td>
                    </tr>
                    <tr style="background: #FFF">
                        <td style="background: #fff; height: 10px; border-width: 2px; border-color: #aaaaaa; border-right-style: none; border-bottom-style: none; border-top-style: none; border-left-style: none;"></td>
                        <td style="height: 10px;"></td>
                    </tr>
                </table>
            </div>

            <div style="width: 100%; height: 56px; position: fixed; left: 0px; top: 0px; right: 0px;">

                <table width="100%">
                    <tr style="background: #fff;">
                        <td width="70%">
                            <h1>
                                TPS6598x Host Interface Tools
                            </h1>
                        </td>
                        <td width="30%" align="right" style="vertical-align: bottom;">
                            <button class="aboutbutton" onclick="jsAboutHostTools()"> About </button>
                        </td>
                    </tr>
                </table>

            </div>

            <div class="ti_logo_frame" style="width: 100%; height: 16px; position: fixed; left: 0px; top: 56px; right: 0px;">
            </div>

            <div style="height: 34px"></div>

            <div style="width: 100%; height:36px; background-color: #000; position: fixed; left: 0px; bottom: 0px; right: 0px;">
                <div style="display:inline; height: 32px; position:absolute; top: 2px; left: 10px"> <button style="display:inline; height: 32px;" id="testButton">Reset Connection</button> <div style="display:inline; color:#ffffff;" id="connected_status"> <div style="display:inline; color:#ffffff;">Testing...</div> </div> <button style="display:inline; height: 32px;" id="scanI2CButton">I2C Scanner</button> </div>
                <img class='ti_logo' src="resources/images/ti_logo.png" style="background: #000; height: 32px;"/>
            </div>
        </div>       
</body>
</html>
